/*! For license information please see 443.3b17bf433c02099a5060.js.LICENSE.txt */
"use strict";(self.webpackChunkwebpack=self.webpackChunkwebpack||[]).push([[443],{443:(t,n,r)=>{r.d(n,{A:()=>M});var e,o=r(6540),u=r(1791),i=r(7180);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function c(){var t=y(),n=t.m(c),r=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function e(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===r||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function u(t){var n,r;return function(e){n||(n={stop:function(){return r(e.a,2)},catch:function(){return e.v},abrupt:function(t,n){return r(e.a,o[t],n)},delegateYield:function(t,o,u){return n.resultName=o,r(e.d,f(t),u)},finish:function(t){return r(e.f,t)}},r=function(t,r,o){e.p=n.prev,e.n=n.next;try{return t(r,o)}finally{n.next=e.n}}),n.resultName&&(n[n.resultName]=e.v,n.resultName=void 0),n.sent=e.v,n.next=e.n;try{return t.call(this,n)}finally{e.p=n.prev,e.n=n.next}}}return(c=function(){return{wrap:function(n,r,e,o){return t.w(u(n),r,e,o&&o.reverse())},isGeneratorFunction:e,mark:t.m,awrap:function(t,n){return new b(t,n)},AsyncIterator:p,async:function(t,n,r,o,i){return(e(n)?v:s)(u(t),n,r,o,i)},keys:l,values:f}})()}function f(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}throw new TypeError(a(t)+" is not iterable")}function l(t){var n=Object(t),r=[];for(var e in n)r.unshift(e);return function t(){for(;r.length;)if((e=r.pop())in n)return t.value=e,t.done=!1,t;return t.done=!0,t}}function s(t,n,r,e,o){var u=v(t,n,r,e,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function v(t,n,r,e,o){return new p(y().w(t,n,r,e),o||Promise)}function p(t,n){function r(e,o,u,i){try{var a=t[e](o),c=a.value;return c instanceof b?n.resolve(c.v).then(function(t){r("next",t,u,i)},function(t){r("throw",t,u,i)}):n.resolve(c).then(function(t){a.value=t,u(a)},function(t){return r("throw",t,u,i)})}catch(t){i(t)}}var e;this.next||(h(p.prototype),h(p.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),h(this,"_invoke",function(t,o,u){function i(){return new n(function(n,e){r(t,u,n,e)})}return e=e?e.then(i,i):i()},!0)}function y(){var t,n,r="function"==typeof Symbol?Symbol:{},e=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function u(r,e,o,u){var c=e&&e.prototype instanceof a?e:a,f=Object.create(c.prototype);return h(f,"_invoke",function(r,e,o){var u,a,c,f=0,l=o||[],s=!1,v={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(n,r){return u=n,a=0,c=t,v.n=r,i}};function p(r,e){for(a=r,c=e,n=0;!s&&f&&!o&&n<l.length;n++){var o,u=l[n],p=v.p,y=u[2];r>3?(o=y===e)&&(c=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=p&&((o=r<2&&p<u[1])?(a=0,v.v=e,v.n=u[1]):p<y&&(o=r<3||u[0]>e||e>y)&&(u[4]=r,u[5]=e,v.n=y,a=0))}if(o||r>1)return i;throw s=!0,e}return function(o,l,y){if(f>1)throw TypeError("Generator is already running");for(s&&1===l&&p(l,y),a=l,c=y;(n=a<2?t:c)||!s;){u||(a?a<3?(a>1&&(v.n=-1),p(a,c)):v.n=c:v.v=c);try{if(f=2,u){if(a||(o="next"),n=u[o]){if(!(n=n.call(u,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,a<2&&(a=0)}else 1===a&&(n=u.return)&&n.call(u),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((n=(s=v.n<0)?c:r.call(e,v))!==i)break}catch(n){u=t,a=1,c=n}finally{f=1}}return{value:n,done:s}}}(r,o,u),!0),f}var i={};function a(){}function c(){}function f(){}n=Object.getPrototypeOf;var l=[][e]?n(n([][e]())):(h(n={},e,function(){return this}),n),s=f.prototype=a.prototype=Object.create(l);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,h(t,o,"GeneratorFunction")),t.prototype=Object.create(s),t}return c.prototype=f,h(s,"constructor",f),h(f,"constructor",c),c.displayName="GeneratorFunction",h(f,o,"GeneratorFunction"),h(s),h(s,o,"Generator"),h(s,e,function(){return this}),h(s,"toString",function(){return"[object Generator]"}),(y=function(){return{w:u,m:v}})()}function h(t,n,r,e){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}h=function(t,n,r,e){function u(n,r){h(t,n,function(t){return this._invoke(n,r,t)})}n?o?o(t,n,{value:r,enumerable:!e,configurable:!e,writable:!e}):t[n]=r:(u("next",0),u("throw",1),u("return",2))},h(t,n,r,e)}function b(t,n){this.v=t,this.k=n}function m(t,n,r,e,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return void r(t)}a.done?n(c):Promise.resolve(c).then(e,o)}function d(t){return function(){var n=this,r=arguments;return new Promise(function(e,o){var u=t.apply(n,r);function i(t){m(u,e,o,i,a,"next",t)}function a(t){m(u,e,o,i,a,"throw",t)}i(void 0)})}}function w(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var e,o,u,i,a=[],c=!0,f=!1;try{if(u=(r=r.call(t)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(e=u.call(r)).done)&&(a.push(e.value),a.length!==n);c=!0);}catch(t){f=!0,o=t}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(f)throw o}}return a}}(t,n)||function(t,n){if(t){if("string"==typeof t)return g(t,n);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=Array(n);r<n;r++)e[r]=t[r];return e}function x(){return x=Object.assign?Object.assign.bind():function(t){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var e in r)({}).hasOwnProperty.call(r,e)&&(t[e]=r[e])}return t},x.apply(null,arguments)}const S=function(t){return o.createElement("svg",x({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,xmlns:"http://www.w3.org/2000/svg"},t),e||(e=o.createElement("path",{d:"M16.5 3C19.5376 3 22 5.5 22 9C22 16 14.5 20 12 21.5C9.5 20 2 16 2 9C2 5.5 4.5 3 7.5 3C9.35997 3 11 4 12 5C13 4 14.64 3 16.5 3Z",fill:"none"})))};var k=r(9544),O=r(4848);function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function _(){var t=T(),n=t.m(_),r=(Object.getPrototypeOf?Object.getPrototypeOf(n):n.__proto__).constructor;function e(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===r||"GeneratorFunction"===(n.displayName||n.name))}var o={throw:1,return:2,break:3,continue:3};function u(t){var n,r;return function(e){n||(n={stop:function(){return r(e.a,2)},catch:function(){return e.v},abrupt:function(t,n){return r(e.a,o[t],n)},delegateYield:function(t,o,u){return n.resultName=o,r(e.d,P(t),u)},finish:function(t){return r(e.f,t)}},r=function(t,r,o){e.p=n.prev,e.n=n.next;try{return t(r,o)}finally{n.next=e.n}}),n.resultName&&(n[n.resultName]=e.v,n.resultName=void 0),n.sent=e.v,n.next=e.n;try{return t.call(this,n)}finally{e.p=n.prev,e.n=n.next}}}return(_=function(){return{wrap:function(n,r,e,o){return t.w(u(n),r,e,o&&o.reverse())},isGeneratorFunction:e,mark:t.m,awrap:function(t,n){return new E(t,n)},AsyncIterator:A,async:function(t,n,r,o,i){return(e(n)?G:F)(u(t),n,r,o,i)},keys:N,values:P}})()}function P(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}}throw new TypeError(j(t)+" is not iterable")}function N(t){var n=Object(t),r=[];for(var e in n)r.unshift(e);return function t(){for(;r.length;)if((e=r.pop())in n)return t.value=e,t.done=!1,t;return t.done=!0,t}}function F(t,n,r,e,o){var u=G(t,n,r,e,o);return u.next().then(function(t){return t.done?t.value:u.next()})}function G(t,n,r,e,o){return new A(T().w(t,n,r,e),o||Promise)}function A(t,n){function r(e,o,u,i){try{var a=t[e](o),c=a.value;return c instanceof E?n.resolve(c.v).then(function(t){r("next",t,u,i)},function(t){r("throw",t,u,i)}):n.resolve(c).then(function(t){a.value=t,u(a)},function(t){return r("throw",t,u,i)})}catch(t){i(t)}}var e;this.next||(C(A.prototype),C(A.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),C(this,"_invoke",function(t,o,u){function i(){return new n(function(n,e){r(t,u,n,e)})}return e=e?e.then(i,i):i()},!0)}function T(){var t,n,r="function"==typeof Symbol?Symbol:{},e=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function u(r,e,o,u){var c=e&&e.prototype instanceof a?e:a,f=Object.create(c.prototype);return C(f,"_invoke",function(r,e,o){var u,a,c,f=0,l=o||[],s=!1,v={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(n,r){return u=n,a=0,c=t,v.n=r,i}};function p(r,e){for(a=r,c=e,n=0;!s&&f&&!o&&n<l.length;n++){var o,u=l[n],p=v.p,y=u[2];r>3?(o=y===e)&&(c=u[(a=u[4])?5:(a=3,3)],u[4]=u[5]=t):u[0]<=p&&((o=r<2&&p<u[1])?(a=0,v.v=e,v.n=u[1]):p<y&&(o=r<3||u[0]>e||e>y)&&(u[4]=r,u[5]=e,v.n=y,a=0))}if(o||r>1)return i;throw s=!0,e}return function(o,l,y){if(f>1)throw TypeError("Generator is already running");for(s&&1===l&&p(l,y),a=l,c=y;(n=a<2?t:c)||!s;){u||(a?a<3?(a>1&&(v.n=-1),p(a,c)):v.n=c:v.v=c);try{if(f=2,u){if(a||(o="next"),n=u[o]){if(!(n=n.call(u,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,a<2&&(a=0)}else 1===a&&(n=u.return)&&n.call(u),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);u=t}else if((n=(s=v.n<0)?c:r.call(e,v))!==i)break}catch(n){u=t,a=1,c=n}finally{f=1}}return{value:n,done:s}}}(r,o,u),!0),f}var i={};function a(){}function c(){}function f(){}n=Object.getPrototypeOf;var l=[][e]?n(n([][e]())):(C(n={},e,function(){return this}),n),s=f.prototype=a.prototype=Object.create(l);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,C(t,o,"GeneratorFunction")),t.prototype=Object.create(s),t}return c.prototype=f,C(s,"constructor",f),C(f,"constructor",c),c.displayName="GeneratorFunction",C(f,o,"GeneratorFunction"),C(s),C(s,o,"Generator"),C(s,e,function(){return this}),C(s,"toString",function(){return"[object Generator]"}),(T=function(){return{w:u,m:v}})()}function C(t,n,r,e){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}C=function(t,n,r,e){function u(n,r){C(t,n,function(t){return this._invoke(n,r,t)})}n?o?o(t,n,{value:r,enumerable:!e,configurable:!e,writable:!e}):t[n]=r:(u("next",0),u("throw",1),u("return",2))},C(t,n,r,e)}function E(t,n){this.v=t,this.k=n}function I(t,n,r,e,o,u,i){try{var a=t[u](i),c=a.value}catch(t){return void r(t)}a.done?n(c):Promise.resolve(c).then(e,o)}const M=function(t){var n=t.movieId,r=t.className,e=t.variant,a=t.onAuthRequired,f=t.onRemoveStart,l=function(t){var n=(0,i.As)(),r=n.user,e=n.isAuth,a=n.reloadProfile,f=w((0,o.useState)(!1),2),l=f[0],s=f[1],v=(0,o.useMemo)(function(){return!!(r&&r.favorites&&t)&&r.favorites.includes(String(t))},[r,t]),p=w((0,o.useState)(v),2),y=p[0],h=p[1];(0,o.useEffect)(function(){h(v)},[v]);var b=(0,o.useCallback)(d(c().mark(function n(){return c().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&t){n.next=2;break}return n.abrupt("return");case 2:if(n.prev=2,s(!0),!y){n.next=10;break}return n.next=7,u.u.favorites.favoritesMovieIdDelete(t);case 7:h(!1),n.next=13;break;case 10:return n.next=12,u.u.favorites.favoritesPost({id:String(t)});case 12:h(!0);case 13:return n.next=15,a();case 15:return n.prev=15,s(!1),n.finish(15);case 18:case"end":return n.stop()}},n,null,[[2,,15,18]])})),[e,y,t,a]),m=(0,o.useCallback)(d(c().mark(function n(){return c().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&t){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,s(!0),n.next=6,u.u.favorites.favoritesMovieIdDelete(t);case 6:return h(!1),n.next=9,a();case 9:return n.prev=9,s(!1),n.finish(9);case 12:case"end":return n.stop()}},n,null,[[2,,9,12]])})),[e,t,a]);return{isFavorite:y,isAuth:e,loading:l,toggleFavorite:b,removeFavorite:m}}(n),s=l.isFavorite,v=l.isAuth,p=l.loading,y=l.toggleFavorite,h=l.removeFavorite,b=p||!n,m=function(){var t,n=(t=_().mark(function t(){return _().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(v){t.next=3;break}return null==a||a(),t.abrupt("return");case 3:if("remove"!==e){t.next=9;break}return null==f||f(),t.next=7,h();case 7:t.next=11;break;case 9:return t.next=11,y();case 11:case"end":return t.stop()}},t)}),function(){var n=this,r=arguments;return new Promise(function(e,o){var u=t.apply(n,r);function i(t){I(u,e,o,i,a,"next",t)}function a(t){I(u,e,o,i,a,"throw",t)}i(void 0)})});return function(){return n.apply(this,arguments)}}();return(0,O.jsxs)(k.A,{variant:"icon",type:"button",className:"favorite-btn ".concat(s?"favorite-btn--active":""," ").concat(r||""),onClick:m,"aria-pressed":s,disabled:b,children:["remove"===e?"X":(0,O.jsx)(S,{className:"favorite-btn__icon"}),p&&(0,O.jsx)("span",{className:"favorite-btn__spinner"})]})}}}]);
//# sourceMappingURL=443.3b17bf433c02099a5060.js.map